{
  "query": "\nSELECT \n  i.id,\n  i.locationId,\n  l.code as locationCode,\n  i.productId,\n  p.code as productCode,\n  i.quantity as totalQty,\n  i.reservedQuantity,\n  COALESCE(SUM(oi.boxes * pr.unitsPerBox), 0) as actualReserved\nFROM inventory i\nJOIN locations l ON i.locationId = l.id\nJOIN products p ON i.productId = p.id\nLEFT JOIN products pr ON i.productId = pr.id\nLEFT JOIN orderItems oi ON oi.productId = i.productId AND oi.batchNumber = i.batchNumber\nLEFT JOIN orders o ON oi.orderId = o.id AND o.status IN ('pending', 'in_progress', 'separated', 'in_wave', 'picked')\nWHERE i.reservedQuantity > 0\nGROUP BY i.id, i.locationId, l.code, i.productId, p.code, i.quantity, i.reservedQuantity\nHAVING i.reservedQuantity != COALESCE(SUM(oi.boxes * pr.unitsPerBox), 0);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 44TTARZqZm4zxSK.6207e12656da --database YB8JBMXFWs4i38ecUvjPnS --execute \nSELECT \n  i.id,\n  i.locationId,\n  l.code as locationCode,\n  i.productId,\n  p.code as productCode,\n  i.quantity as totalQty,\n  i.reservedQuantity,\n  COALESCE(SUM(oi.boxes * pr.unitsPerBox), 0) as actualReserved\nFROM inventory i\nJOIN locations l ON i.locationId = l.id\nJOIN products p ON i.productId = p.id\nLEFT JOIN products pr ON i.productId = pr.id\nLEFT JOIN orderItems oi ON oi.productId = i.productId AND oi.batchNumber = i.batchNumber\nLEFT JOIN orders o ON oi.orderId = o.id AND o.status IN ('pending', 'in_progress', 'separated', 'in_wave', 'picked')\nWHERE i.reservedQuantity > 0\nGROUP BY i.id, i.locationId, l.code, i.productId, p.code, i.quantity, i.reservedQuantity\nHAVING i.reservedQuantity != COALESCE(SUM(oi.boxes * pr.unitsPerBox), 0);\n",
  "returncode": 1,
  "logs": [
    "ERROR 1146 (42S02) at line 2: Table 'yb8jbmxfws4i38ecuvjpns.locations' doesn't exist"
  ]
}