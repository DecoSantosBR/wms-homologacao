{
  "query": "SELECT \n  i.id,\n  i.productId,\n  i.locationId,\n  i.tenantId,\n  i.batch,\n  i.quantity,\n  i.reservedQuantity as currentReserved,\n  COALESCE(SUM(poi.requestedQuantity), 0) as correctReserved,\n  (i.quantity - COALESCE(SUM(poi.requestedQuantity), 0)) as correctAvailable\nFROM inventory i\nLEFT JOIN pickingOrderItems poi ON i.productId = poi.productId AND i.batch = poi.batch\nLEFT JOIN pickingOrders po ON poi.pickingOrderId = po.id AND po.status IN ('pending', 'in_progress', 'separated')\nGROUP BY i.id, i.productId, i.locationId, i.tenantId, i.batch, i.quantity, i.reservedQuantity\nHAVING i.reservedQuantity != COALESCE(SUM(poi.requestedQuantity), 0)\nLIMIT 20;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 44TTARZqZm4zxSK.6207e12656da --database YB8JBMXFWs4i38ecUvjPnS --execute SELECT \n  i.id,\n  i.productId,\n  i.locationId,\n  i.tenantId,\n  i.batch,\n  i.quantity,\n  i.reservedQuantity as currentReserved,\n  COALESCE(SUM(poi.requestedQuantity), 0) as correctReserved,\n  (i.quantity - COALESCE(SUM(poi.requestedQuantity), 0)) as correctAvailable\nFROM inventory i\nLEFT JOIN pickingOrderItems poi ON i.productId = poi.productId AND i.batch = poi.batch\nLEFT JOIN pickingOrders po ON poi.pickingOrderId = po.id AND po.status IN ('pending', 'in_progress', 'separated')\nGROUP BY i.id, i.productId, i.locationId, i.tenantId, i.batch, i.quantity, i.reservedQuantity\nHAVING i.reservedQuantity != COALESCE(SUM(poi.requestedQuantity), 0)\nLIMIT 20;",
  "rows": [
    {
      "id": "270008",
      "productId": "5",
      "locationId": "120001",
      "tenantId": "1",
      "batch": "22D08LB108",
      "quantity": "160",
      "currentReserved": "320",
      "correctReserved": "0",
      "correctAvailable": "160"
    },
    {
      "id": "270009",
      "productId": "6",
      "locationId": "3",
      "tenantId": "1",
      "batch": "22D08LA129",
      "quantity": "140",
      "currentReserved": "280",
      "correctReserved": "0",
      "correctAvailable": "140"
    },
    {
      "id": "270007",
      "productId": "4",
      "locationId": "1",
      "tenantId": "1",
      "batch": "22D14LA124",
      "quantity": "280",
      "currentReserved": "560",
      "correctReserved": "0",
      "correctAvailable": "280"
    }
  ],
  "messages": [],
  "stdout": "id\tproductId\tlocationId\ttenantId\tbatch\tquantity\tcurrentReserved\tcorrectReserved\tcorrectAvailable\n270008\t5\t120001\t1\t22D08LB108\t160\t320\t0\t160\n270009\t6\t3\t1\t22D08LA129\t140\t280\t0\t140\n270007\t4\t1\t1\t22D14LA124\t280\t560\t0\t280\n",
  "stderr": "",
  "execution_time_ms": 486
}