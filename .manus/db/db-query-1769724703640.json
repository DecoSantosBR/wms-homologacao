{
  "query": "UPDATE inventory i\nLEFT JOIN (\n  SELECT \n    poi.productId,\n    poi.batch,\n    SUM(poi.requestedQuantity) as totalReserved\n  FROM pickingOrderItems poi\n  INNER JOIN pickingOrders po ON poi.pickingOrderId = po.id\n  WHERE po.status IN ('pending', 'in_progress', 'separated')\n  GROUP BY poi.productId, poi.batch\n) active_reserves ON i.productId = active_reserves.productId AND i.batch = active_reserves.batch\nSET i.reservedQuantity = COALESCE(active_reserves.totalReserved, 0)\nWHERE i.reservedQuantity != COALESCE(active_reserves.totalReserved, 0);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 44TTARZqZm4zxSK.6207e12656da --database YB8JBMXFWs4i38ecUvjPnS --execute UPDATE inventory i\nLEFT JOIN (\n  SELECT \n    poi.productId,\n    poi.batch,\n    SUM(poi.requestedQuantity) as totalReserved\n  FROM pickingOrderItems poi\n  INNER JOIN pickingOrders po ON poi.pickingOrderId = po.id\n  WHERE po.status IN ('pending', 'in_progress', 'separated')\n  GROUP BY poi.productId, poi.batch\n) active_reserves ON i.productId = active_reserves.productId AND i.batch = active_reserves.batch\nSET i.reservedQuantity = COALESCE(active_reserves.totalReserved, 0)\nWHERE i.reservedQuantity != COALESCE(active_reserves.totalReserved, 0);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 360
}