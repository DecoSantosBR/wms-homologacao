{
  "query": "\n-- Para cada pickingWaveItem, pegar o primeiro pickingOrderId encontrado nas reservas\nUPDATE pickingWaveItems pwi\nSET pwi.pickingOrderId = (\n  SELECT pr.pickingOrderId\n  FROM inventory inv\n  JOIN pickingReservations pr ON inv.id = pr.inventoryId\n  WHERE inv.locationId = pwi.locationId\n    AND inv.productId = pwi.productId\n    AND COALESCE(inv.batch, '') = COALESCE(pwi.batch, '')\n  LIMIT 1\n)\nWHERE pwi.waveId = 30004 AND pwi.pickingOrderId IS NULL;\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 44TTARZqZm4zxSK.6207e12656da --database YB8JBMXFWs4i38ecUvjPnS --execute \n-- Para cada pickingWaveItem, pegar o primeiro pickingOrderId encontrado nas reservas\nUPDATE pickingWaveItems pwi\nSET pwi.pickingOrderId = (\n  SELECT pr.pickingOrderId\n  FROM inventory inv\n  JOIN pickingReservations pr ON inv.id = pr.inventoryId\n  WHERE inv.locationId = pwi.locationId\n    AND inv.productId = pwi.productId\n    AND COALESCE(inv.batch, '') = COALESCE(pwi.batch, '')\n  LIMIT 1\n)\nWHERE pwi.waveId = 30004 AND pwi.pickingOrderId IS NULL;\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 381
}